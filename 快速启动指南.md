# 田野笔记系统 - 快速启动指南

## 🚀 系统概述

田野笔记与访谈记录系统是专为人类学、社会学等领域研究者设计的专业管理平台，支持田野笔记的创建、存储、检索和分析。

## 📋 环境要求

### 后端要求
- **Python**: 3.8 或更高版本
- **MySQL**: 8.0 或更高版本
- **操作系统**: Windows 10/11, macOS, Linux

### 前端要求
- **Node.js**: 16 或更高版本
- **npm**: 7 或更高版本
- **现代浏览器**: Chrome, Firefox, Safari, Edge

## 🛠️ 安装步骤

### 1. 数据库准备

1. 安装并启动MySQL 8.0+
2. 创建数据库：
   ```sql
   CREATE DATABASE fieldwork_notes CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```
3. 确保MySQL服务正在运行

### 2. 后端启动

#### 方法一：使用启动脚本（推荐）
1. 双击运行 `scripts/start_backend.bat`
2. 脚本会自动：
   - 创建Python虚拟环境
   - 安装依赖包
   - 初始化数据库
   - 启动后端服务

#### 方法二：手动启动
```bash
# 进入后端目录
cd backend

# 创建虚拟环境
python -m venv venv

# 激活虚拟环境 (Windows)
venv\Scripts\activate
# 激活虚拟环境 (macOS/Linux)
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 初始化数据库
python scripts/init_db.py

# 启动服务
uvicorn main:app --reload
```

### 3. 前端启动

#### 方法一：使用启动脚本（推荐）
1. 双击运行 `scripts/start_frontend.bat`
2. 脚本会自动安装依赖并启动前端服务

#### 方法二：手动启动
```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm start
```

## 🌐 访问地址

- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

## 👤 默认账户

系统初始化后会创建默认管理员账户：

- **用户名**: `admin`
- **密码**: `admin123`
- **角色**: 管理员

⚠️ **重要**: 请在生产环境中立即修改默认密码！

## 🔧 配置说明

### 后端配置

主要配置文件：`backend/.env`

```env
# 数据库配置
DATABASE_URL=mysql+pymysql://root:root@localhost:3306/fieldwork_notes
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=root
DB_NAME=fieldwork_notes

# JWT配置
SECRET_KEY=your-secret-key-here
ACCESS_TOKEN_EXPIRE_MINUTES=30

# 文件上传配置
UPLOAD_DIR=uploads
MAX_FILE_SIZE=5242880  # 5MB
```

### 前端配置

如需修改API地址，可在 `frontend/.env` 中设置：

```env
REACT_APP_API_URL=http://localhost:8000/api/v1
```

## 📁 项目结构

```
田野笔记系统/
├── backend/              # 后端API服务
│   ├── app/             # 应用核心代码
│   │   ├── api/         # API路由
│   │   ├── core/        # 核心配置
│   │   ├── models/      # 数据库模型
│   │   └── schemas/     # Pydantic模型
│   ├── scripts/         # 工具脚本
│   ├── requirements.txt # Python依赖
│   └── main.py         # 应用入口
├── frontend/            # 前端React应用
│   ├── src/
│   │   ├── components/  # 通用组件
│   │   ├── contexts/    # React上下文
│   │   ├── pages/       # 页面组件
│   │   └── App.tsx     # 应用入口
│   └── package.json    # Node.js依赖
├── scripts/            # 启动脚本
└── docs/              # 项目文档
```

## 🎯 主要功能

### 已实现功能
- ✅ 用户认证与权限管理
- ✅ 响应式界面设计
- ✅ 基础的CRUD操作框架
- ✅ 数据库模型设计
- ✅ API接口框架

### 待开发功能
- 🔄 田野记录的完整CRUD
- 🔄 参与者信息管理
- 🔄 场域信息管理
- 🔄 标签系统实现
- 🔄 图片上传功能
- 🔄 高级检索功能
- 🔄 统计分析功能
- 🔄 数据导出功能

## 🐛 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 确认数据库连接配置是否正确
- 检查数据库是否已创建

### 2. 端口占用
- 后端默认端口：8000
- 前端默认端口：3000
- 如有冲突，可在启动时指定其他端口

### 3. 依赖安装失败
- 确保网络连接正常
- 尝试使用国内镜像源
- 检查Python/Node.js版本是否符合要求

## 📞 技术支持

如遇到问题，请检查：
1. 环境要求是否满足
2. 配置文件是否正确
3. 服务是否正常启动
4. 网络连接是否正常

## 📝 开发说明

本项目采用前后端分离架构：
- 后端使用FastAPI提供RESTful API
- 前端使用React + Material UI构建用户界面
- 数据库使用MySQL存储数据
- 认证采用JWT令牌机制

项目遵循KISS、YAGNI、SOLID设计原则，注重代码质量和可维护性。
